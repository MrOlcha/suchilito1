(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{431:function(e,a,r){Promise.resolve().then(r.bind(r,9843))},9843:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return ForgotPasswordPage}});var t=r(7437),s=r(2265),o=r(4033),n=r(5251),i=r(1396),l=r.n(i),d=r(5846),c=r(9585),m=r(9186),x=r(1226),u=r(4424);function ForgotPasswordPage(){(0,o.useRouter)();let[e,a]=(0,s.useState)("email"),[r,i]=(0,s.useState)(""),[f,h]=(0,s.useState)(""),[p,g]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[j,v]=(0,s.useState)(!1),[w,N]=(0,s.useState)(""),handleSendCode=async e=>{e.preventDefault(),N(""),v(!0);try{let e=await fetch("/pos/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:r})}),t=await e.json();if(!e.ok)throw Error(t.message||"Error al enviar c\xf3digo");a("code")}catch(e){N(e instanceof Error?e.message:"Error al enviar c\xf3digo")}finally{v(!1)}},handleResetPassword=async e=>{if(e.preventDefault(),N(""),p!==y){N("Las contrase\xf1as no coinciden");return}if(p.length<6){N("La contrase\xf1a debe tener al menos 6 caracteres");return}v(!0);try{let e=await fetch("/pos/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:r,codigo:f,newPassword:p})}),t=await e.json();if(!e.ok)throw Error(t.message||"Error al cambiar contrase\xf1a");a("success")}catch(e){N(e instanceof Error?e.message:"Error al cambiar contrase\xf1a")}finally{v(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-primary-50 to-secondary-50",children:[(0,t.jsx)(d.default,{}),(0,t.jsx)("div",{className:"pt-24 pb-16",children:(0,t.jsx)("div",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:"success"===e?(0,t.jsxs)("div",{className:"p-8 text-center",children:[(0,t.jsx)(m.Z,{className:"h-20 w-20 text-green-500 mx-auto mb-6"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"\xa1Contrase\xf1a Actualizada!"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Tu contrase\xf1a ha sido cambiada exitosamente."}),(0,t.jsx)(l(),{href:"/login",className:"inline-flex items-center justify-center w-full px-4 py-3 bg-gradient-to-r from-primary-300 to-secondary-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200",children:"Iniciar Sesi\xf3n"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-primary-300 to-secondary-600 px-8 py-8 text-center",children:[(0,t.jsx)(n.E.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5,delay:.2},className:"w-20 h-20 bg-white rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(x.Z,{className:"h-10 w-10 text-primary-300"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"email"===e?"Recuperar Contrase\xf1a":"Nueva Contrase\xf1a"}),(0,t.jsx)("p",{className:"text-white/90",children:"email"===e?"Te enviaremos un c\xf3digo a tu correo":"Ingresa el c\xf3digo y tu nueva contrase\xf1a"})]}),(0,t.jsxs)("div",{className:"px-8 py-8",children:[w&&(0,t.jsx)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-sm text-red-600 font-medium",children:w})}),"email"===e?(0,t.jsxs)("form",{onSubmit:handleSendCode,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Correo Electr\xf3nico"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{id:"email",type:"email",value:r,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-3 pl-12 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-300 focus:border-transparent transition-all duration-200",placeholder:"tu@email.com"}),(0,t.jsx)(u.Z,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-400"})]})]}),(0,t.jsx)("button",{type:"submit",disabled:j,className:"w-full bg-gradient-to-r from-primary-300 to-secondary-600 hover:from-primary-400 hover:to-secondary-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 disabled:opacity-50",children:j?"Enviando...":"Enviar C\xf3digo"})]}):(0,t.jsxs)("form",{onSubmit:handleResetPassword,className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"code",className:"block text-sm font-medium text-gray-700 mb-2",children:"C\xf3digo de Verificaci\xf3n"}),(0,t.jsx)("input",{id:"code",type:"text",value:f,onChange:e=>h(e.target.value.toUpperCase()),maxLength:6,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-300 focus:border-transparent transition-all duration-200 text-center font-mono text-lg font-semibold tracking-widest",placeholder:"ABC123"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Revisa tu correo e ingresa el c\xf3digo de 6 caracteres"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nueva Contrase\xf1a"}),(0,t.jsx)("input",{id:"newPassword",type:"password",value:p,onChange:e=>g(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-300 focus:border-transparent transition-all duration-200",placeholder:"M\xednimo 6 caracteres"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contrase\xf1a"}),(0,t.jsx)("input",{id:"confirmPassword",type:"password",value:y,onChange:e=>b(e.target.value),required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-300 focus:border-transparent transition-all duration-200",placeholder:"Repite tu contrase\xf1a"})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a("email"),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors",children:"Atr\xe1s"}),(0,t.jsx)("button",{type:"submit",disabled:j,className:"flex-1 bg-gradient-to-r from-primary-300 to-secondary-600 hover:from-primary-400 hover:to-secondary-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200 disabled:opacity-50",children:j?"Cambiando...":"Cambiar Contrase\xf1a"})]})]}),(0,t.jsx)("div",{className:"mt-6 text-center",children:(0,t.jsx)(l(),{href:"/login",className:"text-sm text-gray-600 hover:text-primary-300 transition-colors",children:"‚Üê Volver a Iniciar Sesi\xf3n"})})]})]})})})}),(0,t.jsx)(c.default,{})]})}}},function(e){e.O(0,[597,358,619,744],function(){return e(e.s=431)}),_N_E=e.O()}]);