(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{1470:function(e,r,t){Promise.resolve().then(t.bind(t,7521))},7521:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return RegistroPage}});var a=t(7437),s=t(2265),o=t(4033),n=t(5251),i=t(9186),l=t(3549),c=t(139),d=t(5846),m=t(1396),u=t.n(m);function RegistroPage(){let e=(0,o.useRouter)(),r=(0,o.useSearchParams)(),{register:t,user:m}=(0,l.useAuth)(),{addToCart:x}=(0,c.useCart)(),[f,h]=(0,s.useState)("form"),[g,p]=(0,s.useState)(!1),[b,y]=(0,s.useState)(""),[j,v]=(0,s.useState)(""),[N,w]=(0,s.useState)({nombre:"",telefono:"",correo:"",password:"",confirmPassword:"",dia:"",mes:""});(0,s.useEffect)(()=>{if(m){try{let e=sessionStorage.getItem("pendingCartItem");if(e){let{product:r,configurations:t}=JSON.parse(e);t.forEach(e=>{x(r,e)}),sessionStorage.removeItem("pendingCartItem")}}catch(e){console.error("Error adding pending cart item:",e)}let t=setTimeout(()=>{let t=r.get("returnUrl")||"/";e.push(t)},1e3);return()=>clearTimeout(t)}},[m,e,r,x]);let handleInputChange=e=>{let{name:r,value:t}=e.target;("dia"===r||"mes"===r)&&(t&&!/^\d+$/.test(t)||"dia"===r&&t&&(parseInt(t)>31||1>parseInt(t))||"mes"===r&&t&&(parseInt(t)>12||1>parseInt(t)))||w(e=>({...e,[r]:t}))},handleSubmit=async e=>{if(e.preventDefault(),y(""),!N.nombre.trim()){y("Por favor ingresa tu nombre");return}if(!N.telefono.trim()){y("Por favor ingresa tu n\xfamero de tel\xe9fono");return}if(!N.correo.trim()){y("Por favor ingresa tu correo");return}if(!N.correo.includes("@")){y("Por favor ingresa un correo v\xe1lido");return}if(!N.password.trim()){y("Por favor ingresa una contrase\xf1a");return}if(N.password.length<6){y("La contrase\xf1a debe tener al menos 6 caracteres");return}if(N.password!==N.confirmPassword){y("Las contrase\xf1as no coinciden");return}if(!N.dia||!N.mes){y("Por favor completa tu fecha de nacimiento");return}let r=parseInt(N.dia),t=parseInt(N.mes);if(r<1||r>31){y("D\xeda inv\xe1lido (debe estar entre 1 y 31)");return}if(t<1||t>12){y("Mes inv\xe1lido (debe estar entre 1 y 12)");return}p(!0);try{let e="".concat(N.dia.padStart(2,"0"),"/").concat(N.mes.padStart(2,"0")),r=await fetch("/pos/api/clientes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nombre:N.nombre,telefono:N.telefono,correo:N.correo,password:N.password,fecha_nacimiento:e})});if(!r.ok){let e=await r.json();throw Error(e.message||"Error al registrar cliente")}let t=await fetch("/pos/api/clientes/send-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:N.correo,nombre:N.nombre})});if(!t.ok){let e=await t.json();throw Error(e.message||"Error al enviar c\xf3digo de verificaci\xf3n")}h("verification")}catch(e){y(e instanceof Error?e.message:"Error al registrarse")}finally{p(!1)}},handleVerification=async e=>{if(e.preventDefault(),y(""),!j.trim()){y("Por favor ingresa el c\xf3digo de verificaci\xf3n");return}p(!0);try{let e=await fetch("/pos/api/clientes/verify-code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({correo:N.correo,codigo:j})});if(!e.ok){let r=await e.json();throw Error(r.message||"C\xf3digo inv\xe1lido")}let r="".concat(N.dia.padStart(2,"0"),"/").concat(N.mes.padStart(2,"0"));await t({nombre:N.nombre,telefono:N.telefono,correo:N.correo,fechaNacimiento:r,email_verificado:1}),h("success")}catch(e){y(e instanceof Error?e.message:"Error al verificar c\xf3digo")}finally{p(!1)}};return m?(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,a.jsx)(d.default,{}),(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center p-4 py-12 mt-20",children:(0,a.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,a.jsx)(i.Z,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\xa1Ya est\xe1s registrado!"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["Bienvenido ",m.nombre,". Te redirigimos al inicio..."]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce delay-100"}),(0,a.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full animate-bounce delay-200"})]})]})})]}):(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-50",children:[(0,a.jsx)(d.default,{}),(0,a.jsx)("div",{className:"flex-1 max-w-2xl mx-auto w-full px-4 py-8 mt-20",children:"success"===f?(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-8 text-center",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(i.Z,{className:"h-20 w-20 text-green-500 mx-auto"})}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\xa1Verificado Exitosamente!"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Tu cuenta est\xe1 completamente verificada y lista para usar."}),(0,a.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 mb-8 text-left",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-500 text-white rounded-full flex items-center justify-center font-bold",children:N.nombre.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Nombre"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:N.nombre})]})]}),(0,a.jsx)("div",{className:"h-px bg-gray-200"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Tel\xe9fono"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:N.telefono})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:N.correo})]})]})}),(0,a.jsx)("button",{onClick:()=>e.push(r.get("returnUrl")||"/"),className:"w-full bg-gradient-to-r from-orange-500 to-red-600 text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all",children:"Continuar a la tienda"})]}):"verification"===f?(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Verifica tu Correo"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Enviamos un c\xf3digo a ",(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:N.correo})]})]}),b&&(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 font-medium",children:b})}),(0,a.jsxs)("form",{onSubmit:handleVerification,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"C\xf3digo de Verificaci\xf3n"}),(0,a.jsx)("input",{type:"text",value:j,onChange:e=>v(e.target.value.toUpperCase()),placeholder:"ABC123",maxLength:6,className:"w-full px-4 py-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 font-mono text-lg text-center font-semibold tracking-widest",disabled:g,autoComplete:"off",autoFocus:!0}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Ingresa el c\xf3digo de 6 caracteres que recibiste por email"})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"ℹ️ El c\xf3digo expira en 10 minutos"})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>h("form"),disabled:g,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg font-semibold hover:bg-gray-200 disabled:opacity-50 transition-colors",children:"Atr\xe1s"}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg font-semibold hover:shadow-lg disabled:opacity-50 transition-all",children:g?"Verificando...":"Verificar"})]})]})]}):(0,a.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Crear mi Cuenta"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Reg\xedstrate para continuar con tu orden"})]}),b&&(0,a.jsx)(n.E.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-red-600 font-medium",children:b})}),(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"nombre",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre Completo"}),(0,a.jsx)("input",{type:"text",id:"nombre",name:"nombre",value:N.nombre,onChange:handleInputChange,placeholder:"Juan P\xe9rez",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 transition-colors",disabled:g,autoFocus:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"telefono",className:"block text-sm font-semibold text-gray-700 mb-2",children:"N\xfamero de Tel\xe9fono"}),(0,a.jsx)("input",{type:"tel",id:"telefono",name:"telefono",value:N.telefono,onChange:handleInputChange,placeholder:"+52 123 456 7890",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 transition-colors",disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"correo",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Correo Electr\xf3nico"}),(0,a.jsx)("input",{type:"email",id:"correo",name:"correo",value:N.correo,onChange:handleInputChange,placeholder:"ejemplo@gmail.com",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 transition-colors",disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,a.jsx)("input",{type:"password",id:"password",name:"password",value:N.password,onChange:handleInputChange,placeholder:"M\xednimo 6 caracteres",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 transition-colors",disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmar Contrase\xf1a"}),(0,a.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:N.confirmPassword,onChange:handleInputChange,placeholder:"Repite tu contrase\xf1a",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 transition-colors",disabled:g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Fecha de Nacimiento (DD/MM)"}),(0,a.jsxs)("div",{className:"flex gap-3 items-end",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",name:"dia",value:N.dia,onChange:handleInputChange,placeholder:"DD",maxLength:2,className:"w-full px-3 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 text-center font-semibold transition-colors",disabled:g})}),(0,a.jsx)("span",{className:"text-gray-400 font-semibold pb-3",children:"/"}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",name:"mes",value:N.mes,onChange:handleInputChange,placeholder:"MM",maxLength:2,className:"w-full px-3 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 focus:ring-0 text-center font-semibold transition-colors",disabled:g})})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Ej: 15/03"})]}),(0,a.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"\uD83D\uDCE7 Recibir\xe1s un c\xf3digo de verificaci\xf3n por correo"})}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(u(),{href:"/",className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg font-semibold hover:bg-gray-200 transition-colors text-center",children:"Cancelar"}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"flex-1 px-4 py-3 bg-gradient-to-r from-orange-500 to-red-600 text-white rounded-lg font-semibold hover:shadow-lg disabled:opacity-50 transition-all",children:g?"Registrando...":"Registrarse"})]})]})]})})]})}},5846:function(e,r,t){"use strict";t.r(r);var a=t(7437),s=t(2265),o=t(5251),n=t(6691),i=t.n(n),l=t(1396),c=t.n(l),d=t(1809),m=t(3549);r.default=()=>{let[e,r]=(0,s.useState)(!1),{user:t,logout:n,isLoading:l}=(0,m.useAuth)();return(0,s.useEffect)(()=>{let handleScroll=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",handleScroll),()=>window.removeEventListener("scroll",handleScroll)},[]),(0,a.jsx)(o.E.header,{initial:{y:-100},animate:{y:0},transition:{duration:.6},className:"md:fixed top-0 left-0 right-0 z-50 transition-all duration-300 ".concat(e?"bg-white/95 backdrop-blur-lg shadow-lg":"bg-transparent"),children:(0,a.jsx)("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between md:justify-between items-center h-16 md:h-16",children:[(0,a.jsx)(o.E.div,{whileHover:{scale:1.05},className:"flex-shrink-0 md:flex-shrink-0 mx-auto md:mx-0",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i(),{src:"/images/logo.svg",alt:"Mazuhi Sushi Logo",width:120,height:40,className:"h-10 w-auto hidden md:block"}),(0,a.jsx)(i(),{src:"/images/iconologo.svg",alt:"Mazuhi Sushi Logo",width:60,height:60,className:"h-12 w-auto md:hidden"})]})}),(0,a.jsx)("div",{className:"hidden md:block",children:(0,a.jsx)("div",{className:"ml-10 flex items-baseline space-x-8",children:[{name:"Inicio",href:"/"},{name:"Men\xfa",href:"/menu"},{name:"Ubicaci\xf3n",href:"/ubicacion"},{name:"Historia",href:"/historia"}].map((e,r)=>(0,a.jsx)(o.E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*r},children:(0,a.jsxs)(c(),{href:e.href,className:"text-gray-700 hover:text-primary-300 px-3 py-2 font-medium transition-colors duration-300 relative group font-condiment",style:{fontSize:"1.2rem"},children:[e.name,(0,a.jsx)("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-primary-300 transition-all duration-300 group-hover:w-full"})]})},e.name))})}),(0,a.jsx)("div",{className:"hidden md:flex items-center space-x-3",children:!l&&t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 bg-green-50 px-4 py-3 rounded-lg border border-green-200",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center font-bold text-sm",children:t.nombre.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-green-700",children:t.nombre}),0===t.email_verificado&&(0,a.jsx)("span",{className:"text-xs text-orange-600 font-medium",children:"⚠️ Email no verificado"})]})]}),(0,a.jsx)("button",{onClick:n,className:"flex items-center space-x-2 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg shadow-md transition-all duration-200 text-sm",children:(0,a.jsx)("span",{children:"Cerrar Sesi\xf3n"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c(),{href:"/login",children:(0,a.jsxs)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 bg-primary-300 hover:bg-primary-400 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Iniciar Sesi\xf3n"})]})}),(0,a.jsx)(c(),{href:"/facturacion",children:(0,a.jsx)(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex items-center space-x-2 bg-gray-800 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg shadow-md transition-all duration-200",children:(0,a.jsx)("span",{className:"text-sm",children:"Facturaci\xf3n"})})})]})})]})})})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var a=t(7437),s=t(2265);let o=(0,s.createContext)(void 0),AuthProvider=e=>{let{children:r}=e,[t,n]=(0,s.useState)(null),[i,l]=(0,s.useState)(!0);(0,s.useEffect)(()=>{checkUser()},[]);let checkUser=async()=>{try{let e=localStorage.getItem("mazuhi_user");e&&n(JSON.parse(e))}catch(e){console.error("Error checking user:",e)}finally{l(!1)}},register=async e=>{try{localStorage.setItem("mazuhi_user",JSON.stringify(e)),n(e)}catch(e){throw console.error("Error registering user:",e),e}},login=async e=>{try{localStorage.setItem("mazuhi_user",JSON.stringify(e)),n(e)}catch(e){throw console.error("Error logging in user:",e),e}};return(0,a.jsx)(o.Provider,{value:{user:t,isLoading:i,register,login,logout:()=>{localStorage.removeItem("mazuhi_user"),n(null),window.location.href="/"},checkUser},children:r})},useAuth=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},139:function(e,r,t){"use strict";t.r(r),t.d(r,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var a=t(7437),s=t(2265);let o={items:[],total:0,itemCount:0,isOpen:!1};function calculateSubtotal(e,r,t){let a=e.precio,s=r.complementos.reduce((e,r)=>e+(r.price||0),0);return(a+s)*t}function cartReducer(e,r){switch(r.type){case"ADD_TO_CART":{let{item:t,options:a}=r.payload,s="".concat(t.nombre,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),o={id:s,menuItem:t,quantity:1,options:a,subtotal:calculateSubtotal(t,a,1)},n=[...e.items,o],i=n.reduce((e,r)=>e+r.subtotal,0),l=n.reduce((e,r)=>e+r.quantity,0);return{...e,items:n,total:i,itemCount:l}}case"REMOVE_FROM_CART":{let t=e.items.filter(e=>e.id!==r.payload),a=t.reduce((e,r)=>e+r.subtotal,0),s=t.reduce((e,r)=>e+r.quantity,0);return{...e,items:t,total:a,itemCount:s}}case"UPDATE_QUANTITY":{let{id:t,quantity:a}=r.payload;if(a<=0)return cartReducer(e,{type:"REMOVE_FROM_CART",payload:t});let s=e.items.map(e=>{if(e.id===t){let r=calculateSubtotal(e.menuItem,e.options,a);return{...e,quantity:a,subtotal:r}}return e}),o=s.reduce((e,r)=>e+r.subtotal,0),n=s.reduce((e,r)=>e+r.quantity,0);return{...e,items:s,total:o,itemCount:n}}case"CLEAR_CART":return o;case"TOGGLE_CART":return{...e,isOpen:!e.isOpen};case"LOAD_CART":return r.payload;default:return e}}let n=(0,s.createContext)(void 0);function CartProvider(e){let{children:r}=e,[t,i]=(0,s.useReducer)(cartReducer,o);(0,s.useEffect)(()=>{try{let e=localStorage.getItem("sushi-cart");if(e){let r=JSON.parse(e);i({type:"LOAD_CART",payload:r})}}catch(e){console.error("Error loading cart from localStorage:",e)}},[]),(0,s.useEffect)(()=>{try{localStorage.setItem("sushi-cart",JSON.stringify(t))}catch(e){console.error("Error saving cart to localStorage:",e)}},[t]);let removeFromCart=e=>{i({type:"REMOVE_FROM_CART",payload:e})};return(0,a.jsx)(n.Provider,{value:{cart:t,addToCart:(e,r)=>{i({type:"ADD_TO_CART",payload:{item:e,options:r}})},removeFromCart,updateQuantity:(e,r)=>{r<=0&&removeFromCart(e)},clearCart:()=>{i({type:"CLEAR_CART"})},toggleCart:()=>{i({type:"TOGGLE_CART"})}},children:r})}function useCart(){let e=(0,s.useContext)(n);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}}},function(e){e.O(0,[597,358,744],function(){return e(e.s=1470)}),_N_E=e.O()}]);