(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[955],{4772:function(e,s,a){Promise.resolve().then(a.bind(a,6798))},6798:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return TestGoogleSheetsPage}});var r=a(7437),n=a(2265);function TestGoogleSheetsPage(){let[e,s]=(0,n.useState)("No probado"),[a,l]=(0,n.useState)([]),[o,t]=(0,n.useState)([]),[i,d]=(0,n.useState)([]),[c,x]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1),[m,u]=(0,n.useState)(!1),[p,j]=(0,n.useState)(""),[b,f]=(0,n.useState)(""),[N,D]=(0,n.useState)(""),testConnection=async()=>{x(!0),j(""),s("Probando...");try{let e=await fetch("/api/menu",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"test"})}),a=await e.json();a.success?s("✅ Conectado exitosamente"):(s("❌ Error: ".concat(a.message)),j(a.message))}catch(a){let e=a instanceof Error?a.message:"Error desconocido";s("❌ Error de red: ".concat(e)),j(e)}finally{x(!1)}},loadMenuData=async()=>{x(!0),j("");try{let e=await fetch("/api/menu"),s=await e.json();s.success?l(s.menu):j(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";j(e)}finally{x(!1)}},loadSucursalesData=async()=>{h(!0),f("");try{let e=await fetch("/api/sucursales"),s=await e.json();s.success?t(s.data):f(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";f(e)}finally{h(!1)}},loadPromocionesData=async()=>{u(!0),D("");try{let e=await fetch("/api/promociones"),s=await e.json();s.success?d(s.data):D(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";D(e)}finally{u(!1)}};return(0,n.useEffect)(()=>{testConnection()},[]),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"\uD83C\uDF63 Integraci\xf3n Google Sheets"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Men\xfa din\xe1mico conectado a Google Spreadsheets"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Panel de Control"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsx)("button",{onClick:testConnection,disabled:c,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:c?"Probando...":"Probar Conexi\xf3n"}),(0,r.jsx)("button",{onClick:loadMenuData,disabled:c,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:c?"Cargando...":"Cargar Men\xfa"}),(0,r.jsx)("button",{onClick:loadSucursalesData,disabled:g,className:"bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:g?"Cargando...":"Cargar Sucursales"}),(0,r.jsx)("button",{onClick:loadPromocionesData,disabled:m,className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:m?"Cargando...":"Cargar Promociones"})]}),(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-bold mb-2",children:"Estado de Conexi\xf3n:"}),(0,r.jsx)("p",{className:"text-lg",children:e}),p&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[(0,r.jsx)("strong",{children:"Error:"})," ",p]})]})]}),a.length>0&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"Men\xfa Cargado desde Google Sheets"}),a.map(e=>(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-[#E09E7D]",children:[e.nombre," (",e.items.length," items)"]}),e.items.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.items.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h4",{className:"font-bold text-gray-900",children:e.nombre}),(0,r.jsxs)("span",{className:"text-lg font-bold text-[#E09E7D]",children:["$",e.precio.toLocaleString()]})]}),e.descripcion&&(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.descripcion}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.nuevo&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Nuevo"}),e.vegetariano&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"\uD83C\uDF31 Vegetariano"}),e.picante&&(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"\uD83C\uDF36️ Picante"}),e.favorito&&(0,r.jsx)("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"❤️ Favorito"})]})]},s))}):(0,r.jsx)("p",{className:"text-gray-500 italic",children:"No hay items en esta categor\xeda"})]},e.id))]}),o.length>0&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"\uD83C\uDFEA Sucursales Cargadas desde Google Sheets"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-purple-600",children:["Sucursales (",o.length," encontradas)"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,r.jsx)("h4",{className:"font-bold text-gray-900",children:e.nombre})}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDCCD Direcci\xf3n:"})," ",e.direccion]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83C\uDFD9️ Ciudad:"})," ",e.ciudad,", ",e.estado]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDCDE Tel\xe9fono:"})," ",e.telefono]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDD50 Horario:"})," ",e.horario]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDCEE CP:"})," ",e.codigo_postal]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDDBC️ Imagen:"})," ",e.imagen_url?"✅ Si":"❌ No"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"✅ Activa:"})," ",e.activa?"Si":"No"]})]})]},s))})]})]}),b&&(0,r.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-red-900",children:"❌ Error al cargar Sucursales"}),(0,r.jsxs)("div",{className:"text-red-800",children:[(0,r.jsx)("strong",{children:"Error:"})," ",b]})]}),i.length>0&&(0,r.jsxs)("div",{className:"space-y-6 mt-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"\uD83C\uDF89 Promociones Cargadas desde Google Sheets"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-orange-600",children:["Promociones (",i.length," encontradas)"]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e,s)=>(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,r.jsx)("div",{className:"flex justify-between items-start mb-2",children:(0,r.jsx)("h4",{className:"font-bold text-gray-900",children:e.nombre})}),(0,r.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDCDD Descripci\xf3n:"})," ",e.descripcion]}),(0,r.jsxs)("div",{className:"flex gap-2 mt-2",children:[e.sucursal&&(0,r.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:"\uD83C\uDFEA Sucursal"}),e.domicilio&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"\uD83D\uDE9A Domicilio"})]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"\uD83D\uDDBC️ Imagen:"})," ",e.imagen_url?"✅ Si":"❌ No"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"✅ Activa:"})," ",e.activa?"Si":"No"]}),e.imagen_url&&(0,r.jsxs)("p",{className:"truncate",children:[(0,r.jsx)("strong",{children:"\uD83D\uDD17 URL:"})," ",(0,r.jsx)("span",{className:"text-xs",children:e.imagen_url})]})]})]},s))})]})]}),N&&(0,r.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-red-900",children:"❌ Error al cargar Promociones"}),(0,r.jsxs)("div",{className:"text-red-800",children:[(0,r.jsx)("strong",{children:"Error:"})," ",N]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCCB Informaci\xf3n T\xe9cnica"}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Spreadsheet ID:"}),(0,r.jsx)("code",{className:"bg-gray-100 px-2 py-1 rounded ml-2",children:"1zQ8GWmW72NrhspyhF93ZKBnD1TSvnm69O2Gv2EECCUY"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Hojas esperadas:"})," Entradas, Arroces, Rollos_Naturales, Rollos_Empanizados, Rollos_Especiales, Rollos_Horneados, Bebidas, Postres, Extras, Sucursales, Promociones"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Columnas de Men\xfa:"})," nombre, descripcion, precio, imagen_url, nuevo, vegetariano, picante, favorito"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Columnas de Sucursales:"})," nombre, direccion, telefono, horario, ciudad, estado, codigo_postal, imagen_url, activa"]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Columnas de Promociones:"})," nombre, descripcion, imagen_url, activa, sucursal, domicilio"]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 mt-8",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"\uD83D\uDCDD Instrucciones"}),(0,r.jsxs)("div",{className:"space-y-2 text-blue-800",children:[(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"\uD83D\uDCCB Para el Men\xfa:"})}),(0,r.jsx)("p",{children:"1. Cada hoja de men\xfa debe tener: nombre, descripcion, precio, imagen_url, nuevo, vegetariano, picante, favorito"}),(0,r.jsx)("p",{children:"2. Los valores booleanos pueden ser 'true', 'si', o estar vac\xedos"}),(0,r.jsx)("p",{children:"3. El precio debe ser un n\xfamero v\xe1lido"}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"\uD83C\uDFEA Para las Sucursales:"})}),(0,r.jsx)("p",{children:'1. La hoja "Sucursales" debe tener: nombre, direccion, telefono, horario, ciudad, estado, codigo_postal, imagen_url, activa'}),(0,r.jsx)("p",{children:"2. El campo 'activa' determina si la sucursal se muestra (true/si para mostrar)"}),(0,r.jsx)("p",{children:"3. imagen_url es opcional para mostrar foto de la sucursal"}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"\uD83C\uDF89 Para las Promociones:"})}),(0,r.jsx)("p",{children:'1. La hoja "Promociones" debe tener: nombre, descripcion, imagen_url, activa, sucursal, domicilio'}),(0,r.jsx)("p",{children:"2. 'activa': si la promoci\xf3n est\xe1 disponible (true/si para mostrar)"}),(0,r.jsx)("p",{children:"3. 'sucursal': si la promoci\xf3n es v\xe1lida en sucursal (true/si)"}),(0,r.jsx)("p",{children:"4. 'domicilio': si la promoci\xf3n es v\xe1lida a domicilio (true/si)"}),(0,r.jsx)("p",{children:"5. imagen_url se usa como fondo degradado de la promoci\xf3n"}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"⚡ General:"})}),(0,r.jsx)("p",{children:"6. Los cambios en el spreadsheet se reflejan inmediatamente al recargar"})]})]})]})})}}},function(e){e.O(0,[597,358,744],function(){return e(e.s=4772)}),_N_E=e.O()}]);