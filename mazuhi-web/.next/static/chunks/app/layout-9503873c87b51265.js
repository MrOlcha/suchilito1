(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6909:function(e,t,a){Promise.resolve().then(a.t.bind(a,5740,23)),Promise.resolve().then(a.t.bind(a,1344,23)),Promise.resolve().then(a.t.bind(a,2489,23)),Promise.resolve().then(a.bind(a,6901)),Promise.resolve().then(a.bind(a,9829)),Promise.resolve().then(a.bind(a,8718)),Promise.resolve().then(a.bind(a,3549)),Promise.resolve().then(a.bind(a,139))},6901:function(e,t,a){"use strict";a.r(t);var s=a(7437),r=a(4033),n=a(1396),o=a.n(n),i=a(6691),l=a.n(i),c=a(5251),d=a(4992),m=a(2170),x=a(6263),u=a(9267),h=a(3288),g=a(9298),p=a(8248),f=a(5880),b=a(139);t.default=()=>{let e=(0,r.usePathname)(),{cart:t}=(0,b.useCart)();if("/rest"===e)return null;let a=[{name:"INICIO",href:"/",icon:d.Z,iconSolid:h.Z},{name:"MEN\xda",href:"/menu",icon:"custom-menu",iconSolid:"custom-menu"},{name:"CARRITO",href:"/cart",icon:m.Z,iconSolid:g.Z,isCenter:!0},{name:"UBICACI\xd3N",href:"/ubicacion",icon:x.Z,iconSolid:p.Z},{name:"HISTORIA",href:"/historia",icon:u.Z,iconSolid:f.Z}],n=t.items.reduce((e,t)=>e+t.quantity,0);return(0,s.jsx)(c.E.nav,{initial:{y:100},animate:{y:0},transition:{duration:.3,ease:"easeInOut"},className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-lg border-t border-gray-200 shadow-lg z-50 md:hidden",children:(0,s.jsx)("div",{className:"flex items-center justify-around py-2 px-1",children:a.map(t=>{let a=e===t.href;return(0,s.jsx)(o(),{href:t.href,className:"relative flex flex-col items-center justify-center p-2 rounded-lg transition-all duration-200 ".concat(t.isCenter?"mx-2":""),children:t.isCenter?(0,s.jsxs)(c.E.div,{whileTap:{scale:.9},className:"relative flex items-center justify-center w-14 h-14 rounded-full shadow-lg transition-all duration-200 ".concat(a?"bg-gradient-to-r from-blue-500 via-secondary-600 to-indigo-600 text-white":"bg-gradient-to-r from-blue-400 via-secondary-500 to-indigo-500 text-white"),children:[(0,s.jsx)(m.Z,{className:"w-7 h-7"}),n>0&&(0,s.jsx)(c.E.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center shadow-lg",children:n>99?"99+":n})]}):(0,s.jsx)(c.E.div,{whileTap:{scale:.95},className:"flex flex-col items-center",children:(0,s.jsx)("div",{className:"p-3 rounded-lg transition-all duration-200 ".concat(a?"bg-blue-50 text-secondary-600":"text-gray-500"),children:(()=>{if("custom-menu"===t.icon)return(0,s.jsx)("div",{className:"relative w-6 h-6",children:(0,s.jsx)(l(),{src:"/images/menu.svg",alt:"Men\xfa",width:24,height:24,className:"w-6 h-6 transition-all duration-200 ".concat(a?"brightness-0 saturate-100":"brightness-0 saturate-100 opacity-60"),style:{filter:a?"invert(29%) sepia(96%) saturate(1582%) hue-rotate(208deg) brightness(97%) contrast(93%)":"invert(55%) sepia(8%) saturate(9%) hue-rotate(316deg) brightness(95%) contrast(86%)"}})});{let e=a?t.iconSolid:t.icon;return(0,s.jsx)(e,{className:"w-6 h-6"})}})()})})},t.name)})})})}},9829:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CartFloatingButton}});var s=a(7437);a(2265);var r=a(139),n=a(3789),o=a(2167),i=a(5251);function CartFloatingButton(){let{cart:e,toggleCart:t}=(0,r.useCart)();return(0,s.jsx)(o.M,{children:e.itemCount>0&&(0,s.jsxs)(i.E.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:t,className:"fixed bottom-6 right-6 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-2xl z-30 flex items-center gap-2 transition-colors md:flex hidden",children:[(0,s.jsx)(n.Z,{className:"w-6 h-6"}),(0,s.jsx)(i.E.div,{initial:{scale:0},animate:{scale:1},className:"bg-white text-red-600 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold",children:e.itemCount}),(0,s.jsxs)("span",{className:"font-semibold",children:["$",e.total.toFixed(2)]})]})})}},8718:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return CartSidebar}});var s=a(7437),r=a(2265),n=a(139),o=a(3549),i=a(6689),l=a(3789),c=a(2167),d=a(5251),m=a(3242),x=a(1038),u=a(3942),h=a(6263);function LocationPickerModal(e){let{isOpen:t,onClose:a,onSelectLocation:n}=e,o=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useRef)(null),[d,m]=(0,r.useState)(null),[g,p]=(0,r.useState)(!0),[f,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(!t||!o.current){p(!0);return}let e=setTimeout(()=>{initializeMap()},100);return()=>clearTimeout(e)},[t]);let initializeMap=async()=>{try{if(!window.google||!window.google.maps){console.log("Esperando a Google Maps..."),setTimeout(initializeMap,500);return}if(!o.current){console.error("mapRef.current no disponible"),p(!1);return}console.log("\uD83D\uDDFA️ Inicializando Google Maps...");let e={lat:24.2769,lng:-110.2708},t=new window.google.maps.Map(o.current,{zoom:15,center:e,streetViewControl:!1,fullscreenControl:!0,mapTypeControl:!0,zoomControl:!0});l.current=t;let a=new window.google.maps.Marker({position:e,map:t,draggable:!0,title:"Tu ubicaci\xf3n"});c.current=a;let s=new window.google.maps.Geocoder,updateAddress=async(e,t)=>{try{let a=await s.geocode({location:{lat:e,lng:t}});if(a.results&&a.results[0]){let s=a.results[0].formatted_address;m({lat:e,lng:t,address:s})}}catch(e){console.error("Error geocoding:",e)}};a.addListener("dragend",()=>{let e=a.getPosition();e&&updateAddress(e.lat(),e.lng())}),t.addListener("click",e=>{let t=e.latLng.lat(),s=e.latLng.lng();a.setPosition({lat:t,lng:s}),updateAddress(t,s)}),await updateAddress(e.lat,e.lng),p(!1),b(null)}catch(e){console.error("Error inicializando mapa:",e),b("Error al cargar el mapa. Por favor, intenta nuevamente."),p(!1)}};return(0,s.jsx)(x.u,{show:t,children:(0,s.jsxs)(u.Vq,{onClose:a,className:"relative z-50",children:[(0,s.jsx)(x.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50"})}),(0,s.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex min-h-full items-center justify-center p-4",children:(0,s.jsx)(x.u.Child,{enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,s.jsxs)(u.EM,{className:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white shadow-2xl transition-all",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between bg-gradient-to-r from-orange-500 to-red-500 px-6 py-4 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.Z,{className:"w-6 h-6"}),(0,s.jsx)("h2",{className:"text-lg font-bold",children:"Selecciona tu ubicaci\xf3n"})]}),(0,s.jsx)("button",{onClick:a,className:"p-1 hover:bg-white/20 rounded-full transition-colors",children:(0,s.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,s.jsx)("div",{className:"space-y-4 p-6",children:g?(0,s.jsx)("div",{className:"flex items-center justify-center h-96 bg-gray-100 rounded-lg",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full border-4 border-orange-200 border-t-orange-500 animate-spin mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Cargando mapa..."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{ref:o,className:"w-full h-96 rounded-lg border border-gray-300 shadow-sm"}),d&&(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Ubicaci\xf3n seleccionada:"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:d.address}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Lat: ",d.lat.toFixed(4),", Lng: ",d.lng.toFixed(4)]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:["\uD83D\uDCA1 ",(0,s.jsx)("strong",{children:"Tip:"})," Haz clic en el mapa o arrastra el marcador para seleccionar tu ubicaci\xf3n"]})})]})}),(0,s.jsxs)("div",{className:"flex gap-3 border-t border-gray-200 px-6 py-4 bg-gray-50",children:[(0,s.jsx)("button",{onClick:a,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"Cancelar"}),(0,s.jsx)("button",{onClick:()=>{d&&(n(d.address,d.lat,d.lng),a())},disabled:!d,className:"flex-1 px-4 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Confirmar Ubicaci\xf3n"})]})]})})})})]})})}var g=a(6691),p=a.n(g),f=a(2929),b=a(2584),y=a(8265),v=a(5587);function SuccessOrderModal(e){let{isOpen:t,onClose:a,checkoutData:r,orderNumber:n,getEstimatedTime:o}=e;return(0,s.jsx)(c.M,{children:t&&(0,s.jsx)(d.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[60] flex items-center justify-center p-4",onClick:a,children:(0,s.jsx)(d.E.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},onClick:e=>e.stopPropagation(),className:"bg-white rounded-3xl shadow-2xl max-w-4xl w-full overflow-hidden",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5",children:[(0,s.jsx)("div",{className:"md:col-span-2 bg-white p-2 flex items-center justify-center relative overflow-hidden",children:(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(p(),{src:"/images/cocina.png",alt:"Chef",width:600,height:600,className:"object-contain w-full h-auto max-h-full scale-110",priority:!0})})}),(0,s.jsxs)("div",{className:"md:col-span-3 p-8",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"\xa1Tu pedido ha sido realizado exitosamente!"}),(0,s.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-gradient-to-r from-[#a2cbec]/30 to-[#3d89c5]/20 rounded-xl p-4 border border-[#3d89c5]/30",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#3d89c5] rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(f.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Tiempo estimado"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:o()})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-gradient-to-r from-[#a2cbec]/30 to-[#3d89c5]/20 rounded-xl p-4 border border-[#3d89c5]/30",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#3d89c5] rounded-full flex items-center justify-center flex-shrink-0",children:"pickup"===r.delivery.type?(0,s.jsx)(b.Z,{className:"w-6 h-6 text-white"}):(0,s.jsx)(y.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"Tipo de entrega"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:"pickup"===r.delivery.type?"Recoger en sucursal":"Delivery a domicilio"})]})]}),"delivery"===r.delivery.type&&r.delivery.address&&(0,s.jsxs)("div",{className:"flex items-start gap-4 bg-gradient-to-r from-[#a2cbec]/30 to-[#3d89c5]/20 rounded-xl p-4 border border-[#3d89c5]/30",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#3d89c5] rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(h.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Direcci\xf3n de entrega"}),(0,s.jsx)("p",{className:"text-lg text-gray-900",children:r.delivery.address})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-gradient-to-r from-[#a2cbec]/30 to-[#3d89c5]/20 rounded-xl p-4 border border-[#3d89c5]/30",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-[#3d89c5] rounded-full flex items-center justify-center flex-shrink-0",children:(0,s.jsx)(v.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"N\xfamero de pedido"}),(0,s.jsx)("p",{className:"text-xl font-bold text-gray-900",children:n})]})]})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-center text-sm text-blue-800",children:[(0,s.jsx)("span",{className:"font-semibold",children:"\uD83D\uDCF1 Hemos enviado la confirmaci\xf3n a tu WhatsApp."}),(0,s.jsx)("br",{}),"Nos pondremos en contacto contigo pronto."]})}),(0,s.jsx)("button",{onClick:a,className:"w-full bg-gradient-to-r from-[#3d89c5] to-[#2563eb] hover:from-[#2563eb] hover:to-[#1d4ed8] text-white font-semibold py-4 rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Continuar Navegando"})]})]})})})})}var j=a(5106),N=a(5255),w=a(7227);let C={hidden:{opacity:0,x:20},visible:{opacity:1,x:0},exit:{opacity:0,x:-20}};function CartItems(e){let{items:t,onUpdateQuantity:a,onRemoveItem:r,onClearCart:n}=e;return(0,s.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(l.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Tu carrito est\xe1 vac\xedo"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Agrega algunos productos para comenzar"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(c.M,{children:t.map((e,t)=>(0,s.jsx)(d.E.div,{variants:C,initial:"hidden",animate:"visible",exit:"exit",transition:{delay:.1*t},className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("div",{className:"relative w-16 h-16 rounded-lg overflow-hidden bg-gray-200 flex-shrink-0",children:e.menuItem.imagen_url?(0,s.jsx)(p(),{src:e.menuItem.imagen_url,alt:e.menuItem.nombre,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-400 text-xl",children:"\uD83C\uDF71"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:e.menuItem.nombre}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mb-2",children:["$",e.menuItem.precio," c/u"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[e.options.complementos.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Complementos: "}),e.options.complementos.map(e=>e.name).join(", ")]}),e.options.soya&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Soya: "}),e.options.soya.name]}),e.options.cubiertos&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Cubiertos: "}),e.options.cubiertos.name]}),e.options.comentarios&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Comentarios: "}),e.options.comentarios]}),e.options.special&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Especial: "}),e.options.special]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>a(e.id,e.quantity-1),className:"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:(0,s.jsx)(j.Z,{className:"w-3 h-3"})}),(0,s.jsx)("span",{className:"w-8 text-center text-sm font-medium",children:e.quantity}),(0,s.jsx)("button",{onClick:()=>a(e.id,e.quantity+1),className:"w-6 h-6 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center transition-colors",children:(0,s.jsx)(N.Z,{className:"w-3 h-3"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"font-bold text-gray-900",children:["$",e.subtotal.toFixed(2)]}),(0,s.jsx)("button",{onClick:()=>r(e.id),className:"p-1 text-red-500 hover:bg-red-50 rounded transition-colors",children:(0,s.jsx)(w.Z,{className:"w-4 h-4"})})]})]})]})]})},e.id))}),t.length>0&&(0,s.jsx)("button",{onClick:n,className:"w-full text-red-600 hover:text-red-700 text-sm font-medium py-2 transition-colors",children:"Vaciar carrito"})]})})}function CartViewFooter(e){let{total:t,onCheckout:a,onContinueShopping:r}=e;return(0,s.jsx)("div",{className:"border-t border-gray-200 p-6 bg-white",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:"Total:"}),(0,s.jsxs)("span",{className:"text-2xl font-bold text-green-600",children:["$",t.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(d.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:a,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white font-semibold py-4 rounded-xl transition-all transform shadow-lg hover:shadow-xl",children:"\uD83D\uDE9A Finalizar Pedido"}),(0,s.jsx)(d.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-3 rounded-xl transition-colors",children:"Continuar comprando"})]})]})})}var k=a(7805);function CheckoutHeader(e){let{steps:t,currentStep:a,onClose:r}=e;return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 p-6 text-white",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"Finalizar Pedido"}),(0,s.jsx)("p",{className:"text-orange-100 mt-1",children:t[a].title})]}),(0,s.jsx)("button",{onClick:r,className:"text-white/80 hover:text-white transition-colors",children:(0,s.jsx)(i.Z,{className:"w-6 h-6"})})]}),(0,s.jsx)("div",{className:"flex items-center justify-between",children:t.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"\n              flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium\n              ".concat(r<=a?"bg-white text-orange-500":"bg-orange-400 text-white","\n            "),children:r<a?(0,s.jsx)(k.Z,{className:"w-4 h-4"}):r+1}),r<t.length-1&&(0,s.jsx)("div",{className:"\n                w-12 h-0.5 mx-2\n                ".concat(r<a?"bg-white":"bg-orange-400","\n              ")})]},e.id))})]})}var E=a(1809);function CheckoutContact(e){var t,a,r,n;let{name:o,phone:i,onNameChange:l,onPhoneChange:c,errors:d}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(E.Z,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Informaci\xf3n de Contacto"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Necesitamos tus datos para contactarte sobre tu pedido"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),(0,s.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat((null==d?void 0:null===(t=d.contact)||void 0===t?void 0:t.name)?"border-red-500":"border-gray-300"),placeholder:"Ej: Juan P\xe9rez"}),(null==d?void 0:null===(a=d.contact)||void 0===a?void 0:a.name)&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.contact.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xfamero de Tel\xe9fono *"}),(0,s.jsx)("input",{type:"tel",value:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6,10))})(i),onChange:e=>c(e.target.value.replace(/\D/g,"")),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all ".concat((null==d?void 0:null===(r=d.contact)||void 0===r?void 0:r.phone)?"border-red-500":"border-gray-300"),placeholder:"55-1234-5678",maxLength:12}),(null==d?void 0:null===(n=d.contact)||void 0===n?void 0:n.phone)&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.contact.phone})]})]})}function CartSummary(e){let{items:t,total:a,itemCount:r}=e;return(0,s.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-4 border-2 border-orange-200",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,s.jsx)(l.Z,{className:"w-5 h-5 text-orange-600"}),"Resumen de tu Pedido"]}),(0,s.jsx)("div",{className:"space-y-2 mb-3 max-h-64 overflow-y-auto",children:t.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"flex justify-between items-start bg-white rounded-lg p-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.menuItem.nombre}),(e.options.complementos.length>0||e.options.soya||e.options.cubiertos||e.options.comentarios)&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:[e.options.complementos.map(e=>e.name).join(", "),null===(t=e.options.soya)||void 0===t?void 0:t.name,null===(a=e.options.cubiertos)||void 0===a?void 0:a.name,e.options.comentarios].filter(Boolean).join(" • ")})]}),(0,s.jsxs)("div",{className:"text-right ml-2",children:[(0,s.jsxs)("div",{className:"bg-orange-100 text-orange-700 font-bold px-2 py-1 rounded-lg text-sm min-w-[40px]",children:["x",e.quantity]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["$",e.subtotal.toFixed(2)]})]})]},e.id)})}),(0,s.jsxs)("div",{className:"border-t border-orange-200 pt-3 space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-700",children:["Subtotal (",r," items):"]}),(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["$",a.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-700",children:"Total art\xedculos:"}),(0,s.jsx)("span",{className:"font-bold text-lg text-orange-600",children:r})]})]})]})}function CheckoutDelivery(e){var t,a;let{deliveryType:r,address:n,items:o,total:i,itemCount:l,onDeliveryTypeChange:c,onAddressChange:d,onLocationPickerOpen:m,errors:x}=e;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)(CartSummary,{items:o,total:i,itemCount:l}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"\xbfC\xf3mo prefieres recibir tu pedido?"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Elige entre recoger en sucursal o delivery a domicilio"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>c("pickup"),className:"p-4 border-2 rounded-xl transition-all text-center hover:shadow-md ".concat("pickup"===r?"border-orange-500 bg-orange-50 shadow-md":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)(b.Z,{className:"w-8 h-8 text-orange-500 mx-auto mb-3"}),(0,s.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-2",children:"Recoger en Sucursal"}),(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-orange-600 font-medium",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"~30 min"]})]}),(0,s.jsxs)("button",{onClick:()=>c("delivery"),className:"p-4 border-2 rounded-xl transition-all text-center hover:shadow-md ".concat("delivery"===r?"border-orange-500 bg-orange-50 shadow-md":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)(y.Z,{className:"w-8 h-8 text-orange-500 mx-auto mb-3"}),(0,s.jsx)("h4",{className:"font-bold text-gray-900 text-sm mb-2",children:"Delivery a Domicilio"}),(0,s.jsxs)("div",{className:"flex items-center justify-center text-xs text-orange-600 font-medium",children:[(0,s.jsx)(f.Z,{className:"w-4 h-4 mr-1"}),"~45 min"]})]})]}),"delivery"===r&&(0,s.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Direcci\xf3n de Entrega *"}),(0,s.jsx)("button",{onClick:m,className:"w-full px-4 py-3 bg-gradient-to-r from-orange-500 to-orange-600 text-white rounded-xl hover:from-orange-600 hover:to-orange-700 transition-all font-medium flex items-center justify-center gap-2",children:"\uD83D\uDCCD Seleccionar ubicaci\xf3n en mapa"}),n&&(0,s.jsxs)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-xl",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-900",children:"✓ Ubicaci\xf3n seleccionada:"}),(0,s.jsx)("p",{className:"text-sm text-green-700 mt-1",children:n})]}),(0,s.jsx)("textarea",{value:n||"",onChange:e=>d(e.target.value),className:"w-full px-4 py-3 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all text-sm ".concat((null==x?void 0:null===(t=x.delivery)||void 0===t?void 0:t.address)?"border-red-500":"border-gray-300"),placeholder:"O ingresa tu direcci\xf3n manualmente...",rows:2}),(null==x?void 0:null===(a=x.delivery)||void 0===a?void 0:a.address)&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:x.delivery.address})]})]})}var S=a(3352),T=a(1733),A=a(986);function CheckoutPayment(e){var t;let{method:a,cashAmount:r,exactChange:n,total:o,shippingCost:i,deliveryType:l,onMethodChange:c,onCashAmountChange:d,onExactChangeChange:m,errors:x}=e,u=o+i;return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"\xbfC\xf3mo vas a pagar?"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["El pago se realiza al ","pickup"===l?"recoger":"recibir"," tu pedido"]}),"delivery"===l&&(0,s.jsxs)("div",{className:"mt-4 text-sm text-orange-600 font-semibold bg-orange-50 rounded-xl py-2 px-4 inline-block",children:["Se realizar\xe1 un cobro adicional de $",i.toFixed(2)," por tarifa de env\xedo a domicilio."]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("button",{onClick:()=>c("cash"),className:"p-3 border-2 rounded-xl transition-all text-center ".concat("cash"===a?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)(S.Z,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:"Efectivo"})]}),(0,s.jsxs)("button",{onClick:()=>c("card"),className:"p-3 border-2 rounded-xl transition-all text-center ".concat("card"===a?"border-orange-500 bg-orange-50":"border-gray-200 hover:border-gray-300"),children:[(0,s.jsx)(T.Z,{className:"w-6 h-6 text-orange-500 mx-auto mb-2"}),(0,s.jsx)("h4",{className:"font-semibold text-gray-900 text-sm",children:"Tarjeta"})]})]}),"cash"===a&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:["\xbfCon cu\xe1nto vas a pagar? (Total: $",u.toFixed(2),") *"]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("label",{className:"flex items-center p-4 border-2 rounded-xl cursor-pointer transition-all hover:bg-gray-50",children:[(0,s.jsx)("input",{type:"checkbox",checked:n||!1,onChange:e=>{m(e.target.checked),e.target.checked&&d(u)},className:"w-5 h-5 text-orange-600 border-gray-300 rounded focus:ring-orange-500 focus:ring-2"}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900",children:"Pago con cambio exacto"}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Pagar\xe9 exactamente $",u.toFixed(2)]})]})]})}),!n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"O selecciona con qu\xe9 billete pagar\xe1s:"}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-3",children:A.o.map(e=>(0,s.jsxs)("button",{onClick:()=>{d(e.value),m(!1)},disabled:e.value<u,className:"p-3 border-2 rounded-xl text-center transition-all ".concat(r!==e.value||n?e.value<u?"border-gray-200 text-gray-400 cursor-not-allowed":"border-gray-200 hover:border-gray-300":"border-orange-500 bg-orange-50 text-orange-700"),children:[(0,s.jsx)("div",{className:"font-semibold",children:e.label}),e.value>=u&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Cambio: $",(e.value-u).toFixed(2)]})]},e.value))})]}),(null==x?void 0:null===(t=x.payment)||void 0===t?void 0:t.cashAmount)&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-2",children:x.payment.cashAmount})]})]})}function CheckoutReview(e){let{checkoutData:t,total:a,shippingCost:r,estimatedTime:n,onNotesChange:o}=e;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)(k.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Revisa tu Pedido"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Confirma que todo est\xe9 correcto antes de finalizar"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-6",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Resumen del Pedido"}),(0,s.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:[(0,s.jsx)(E.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:t.contact.name})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,s.jsx)("span",{children:(e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6,10))})(t.contact.phone)})]})]}),(0,s.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:["pickup"===t.delivery.type?(0,s.jsx)(b.Z,{className:"w-5 h-5 text-gray-500 mr-2"}):(0,s.jsx)(y.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:"pickup"===t.delivery.type?"Recoger en Sucursal":"Delivery a Domicilio"})]}),t.delivery.address&&(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)(h.Z,{className:"w-5 h-5 text-gray-500 mr-2 mt-0.5"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:t.delivery.address})]}),(0,s.jsxs)("div",{className:"flex items-center mt-2",children:[(0,s.jsx)(f.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:["Tiempo estimado: ",n]})]})]}),(0,s.jsxs)("div",{className:"mb-4 pb-4 border-b border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center mb-2",children:["cash"===t.payment.method?(0,s.jsx)(S.Z,{className:"w-5 h-5 text-gray-500 mr-2"}):(0,s.jsx)(T.Z,{className:"w-5 h-5 text-gray-500 mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:"cash"===t.payment.method?"Efectivo":"Tarjeta"})]}),"cash"===t.payment.method&&t.payment.cashAmount&&(0,s.jsx)("div",{className:"text-sm text-gray-600",children:t.payment.exactChange?(0,s.jsxs)("span",{className:"text-green-600 font-medium",children:["✓ Pago exacto: $",t.payment.cashAmount.toFixed(2)]}):(0,s.jsxs)(s.Fragment,{children:["Pagas con: $",t.payment.cashAmount.toFixed(2),(0,s.jsx)("br",{}),"Tu cambio: $",("cash"===t.payment.method&&t.payment.cashAmount?t.payment.cashAmount-(a+r):0).toFixed(2)]})})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-lg font-semibold",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["$",a.toFixed(2)]})]}),r>0&&(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-2",children:[(0,s.jsx)("span",{children:"Env\xedo a domicilio:"}),(0,s.jsxs)("span",{children:["$",r.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-xl font-bold text-orange-600 mt-3 pt-3 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"Total a Pagar:"}),(0,s.jsxs)("span",{children:["$",(a+r).toFixed(2)]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notas Adicionales (Opcional)"}),(0,s.jsx)("textarea",{value:t.notes||"",onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all",placeholder:"Alguna instrucci\xf3n especial para tu pedido...",rows:3})]})]})}var D=a(13),P=a(3217);function CheckoutNavigation(e){let{steps:t,currentStep:a,isSubmitting:r,onPrevStep:n,onNextStep:o,onComplete:i}=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center p-6 border-t border-gray-200",children:[(0,s.jsxs)("button",{onClick:n,disabled:0===a,className:"flex items-center px-6 py-3 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,s.jsx)(D.Z,{className:"w-5 h-5 mr-1"}),"Anterior"]}),a<t.length-1?(0,s.jsxs)("button",{onClick:o,className:"flex items-center px-8 py-3 bg-orange-600 text-white rounded-xl hover:bg-orange-700 transition-all transform hover:scale-105",children:["Continuar",(0,s.jsx)(P.Z,{className:"w-5 h-5 ml-1"})]}):(0,s.jsx)("button",{onClick:i,disabled:r,className:"flex items-center px-8 py-3 bg-green-600 text-white rounded-xl hover:bg-green-700 disabled:opacity-50 transition-all transform hover:scale-105",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Procesando..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(k.Z,{className:"w-5 h-5 mr-1"}),"Confirmar Pedido"]})})]})}function CartSidebar(){let{cart:e,removeFromCart:t,updateQuantity:a,clearCart:x,toggleCart:u}=(0,n.useCart)(),{user:h,isLoading:g}=(0,o.useAuth)(),[p,f]=(0,r.useState)("cart"),[b,y]=(0,r.useState)(0),[v,j]=(0,r.useState)({contact:{name:"",phone:""},delivery:{type:"pickup"},payment:{method:"cash"},notes:""}),[N,w]=(0,r.useState)({}),[C,k]=(0,r.useState)(!1),[E,S]=(0,r.useState)(""),[T,A]=(0,r.useState)(!1),D="delivery"===v.delivery.type?30:0,P=[{id:"contact",title:"Informaci\xf3n de Contacto",description:"Tu nombre y tel\xe9fono",isCompleted:b>0,isActive:0===b},{id:"delivery",title:"M\xe9todo de Entrega",description:"Recojo o delivery",isCompleted:b>1,isActive:1===b},{id:"payment",title:"M\xe9todo de Pago",description:"Efectivo o tarjeta",isCompleted:b>2,isActive:2===b},{id:"review",title:"Revisar Pedido",description:"Confirma tu orden",isCompleted:b>3,isActive:3===b}];(0,r.useEffect)(()=>{e.isOpen||setTimeout(()=>{f("cart"),y(0),j({contact:{name:"",phone:""},delivery:{type:"pickup"},payment:{method:"cash"},notes:""}),w({}),k(!1)},300)},[e.isOpen]),(0,r.useEffect)(()=>{"checkout"!==p||g||(h?(console.log("✅ CartSidebar: Usuario detectado - Saltando paso de contacto"),y(1),j(e=>({...e,contact:{name:"".concat(h.telefono),phone:h.telefono,email:h.correo}}))):(console.log("❌ CartSidebar: Sin usuario - Mostrar paso de contacto"),y(0)))},[p,h,g]);let updateCheckoutData=e=>{j(t=>({...t,...e})),w({})},validateStep=e=>{let t={};switch(e){case 0:h||(v.contact.name.trim()||(t.contact={...t.contact,name:"El nombre es requerido"}),v.contact.phone.trim()?/^\d{10}$/.test(v.contact.phone.replace(/\D/g,""))||(t.contact={...t.contact,phone:"Ingresa un tel\xe9fono v\xe1lido (10 d\xedgitos)"}):t.contact={...t.contact,phone:"El tel\xe9fono es requerido"});break;case 1:var a;"delivery"!==v.delivery.type||(null===(a=v.delivery.address)||void 0===a?void 0:a.trim())||(t.delivery={address:"La direcci\xf3n es requerida para delivery"});break;case 2:"cash"!==v.payment.method||v.payment.exactChange||v.payment.cashAmount||(t.payment={cashAmount:"Selecciona la denominaci\xf3n con la que pagar\xe1s o marca pago exacto"})}return w(t),0===Object.keys(t).length},handleComplete=async()=>{if(validateStep(b)){k(!0);try{let t=(0,m.m1)(),a=await (0,m.KU)(v,e,t);a.success?(S(t),u(),setTimeout(()=>{f("success"),x()},500)):alert("Error: ".concat(a.message)),k(!1)}catch(e){console.error("Error al procesar el pedido:",e),alert("Error al procesar el pedido. Por favor intenta nuevamente."),k(!1)}}},getEstimatedTime=()=>"pickup"===v.delivery.type?"30 min":"45 min";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.M,{children:e.isOpen&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.E.div,{variants:{closed:{opacity:0},open:{opacity:1}},initial:"closed",animate:"open",exit:"closed",transition:{duration:.3},className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:u}),(0,s.jsxs)(d.E.div,{variants:{closed:{x:"100%"},open:{x:0}},initial:"closed",animate:"open",exit:"closed",transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-full w-full max-w-md bg-white shadow-2xl z-50 flex flex-col",children:["cart"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-b border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(l.Z,{className:"w-6 h-6 text-red-600"}),(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["Mi Carrito (",e.itemCount,")"]})]}),(0,s.jsx)("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,s.jsx)(i.Z,{className:"w-6 h-6"})})]})}),(0,s.jsx)(CartItems,{items:e.items,onUpdateQuantity:a,onRemoveItem:t,onClearCart:x}),e.items.length>0&&(0,s.jsx)(CartViewFooter,{total:e.total,onCheckout:()=>{f("checkout")},onContinueShopping:u})]}),"checkout"===p&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(CheckoutHeader,{steps:P,currentStep:b,onClose:()=>{f("cart"),y(0)}}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[0===b&&!h&&(0,s.jsx)(CheckoutContact,{name:v.contact.name,phone:v.contact.phone,onNameChange:e=>updateCheckoutData({contact:{...v.contact,name:e}}),onPhoneChange:e=>updateCheckoutData({contact:{...v.contact,phone:e}}),errors:N}),1===b&&(0,s.jsx)(CheckoutDelivery,{deliveryType:v.delivery.type,address:v.delivery.address,items:e.items,total:e.total,itemCount:e.itemCount,onDeliveryTypeChange:e=>updateCheckoutData({delivery:{type:e,address:v.delivery.address}}),onAddressChange:e=>updateCheckoutData({delivery:{...v.delivery,address:e}}),onLocationPickerOpen:()=>A(!0),errors:N}),2===b&&(0,s.jsx)(CheckoutPayment,{method:v.payment.method,cashAmount:v.payment.cashAmount,exactChange:v.payment.exactChange,total:e.total,shippingCost:D,deliveryType:v.delivery.type,onMethodChange:e=>updateCheckoutData({payment:{...v.payment,method:e}}),onCashAmountChange:e=>updateCheckoutData({payment:{...v.payment,cashAmount:e}}),onExactChangeChange:e=>updateCheckoutData({payment:{...v.payment,exactChange:e}}),errors:N}),3===b&&(0,s.jsx)(CheckoutReview,{checkoutData:v,total:e.total,shippingCost:D,estimatedTime:getEstimatedTime(),onNotesChange:e=>updateCheckoutData({notes:e})})]}),(0,s.jsx)(CheckoutNavigation,{steps:P,currentStep:b,isSubmitting:C,onPrevStep:()=>{y(e=>Math.max(e-1,0))},onNextStep:()=>{validateStep(b)&&y(e=>Math.min(e+1,P.length-1))},onComplete:handleComplete})]})]})]})}),(0,s.jsx)(SuccessOrderModal,{isOpen:"success"===p&&!e.isOpen,onClose:()=>{f("cart"),y(0)},checkoutData:v,orderNumber:E,getEstimatedTime:getEstimatedTime}),(0,s.jsx)(LocationPickerModal,{isOpen:T,onClose:()=>A(!1),onSelectLocation:(e,t,a)=>{updateCheckoutData({delivery:{...v.delivery,address:e,coordinates:{lat:t,lng:a}}}),console.log("✅ Ubicaci\xf3n seleccionada:",{address:e,lat:t,lng:a})}})]})}},3549:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth}});var s=a(7437),r=a(2265);let n=(0,r.createContext)(void 0),AuthProvider=e=>{let{children:t}=e,[a,o]=(0,r.useState)(null),[i,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{checkUser()},[]);let checkUser=async()=>{try{let e=localStorage.getItem("mazuhi_user");e&&o(JSON.parse(e))}catch(e){console.error("Error checking user:",e)}finally{l(!1)}},register=async e=>{try{localStorage.setItem("mazuhi_user",JSON.stringify(e)),o(e)}catch(e){throw console.error("Error registering user:",e),e}},login=async e=>{try{localStorage.setItem("mazuhi_user",JSON.stringify(e)),o(e)}catch(e){throw console.error("Error logging in user:",e),e}};return(0,s.jsx)(n.Provider,{value:{user:a,isLoading:i,register,login,logout:()=>{localStorage.removeItem("mazuhi_user"),o(null),window.location.href="/"},checkUser},children:t})},useAuth=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},139:function(e,t,a){"use strict";a.r(t),a.d(t,{CartProvider:function(){return CartProvider},useCart:function(){return useCart}});var s=a(7437),r=a(2265);let n={items:[],total:0,itemCount:0,isOpen:!1};function calculateSubtotal(e,t,a){let s=e.precio,r=t.complementos.reduce((e,t)=>e+(t.price||0),0);return(s+r)*a}function cartReducer(e,t){switch(t.type){case"ADD_TO_CART":{let{item:a,options:s}=t.payload,r="".concat(a.nombre,"-").concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),n={id:r,menuItem:a,quantity:1,options:s,subtotal:calculateSubtotal(a,s,1)},o=[...e.items,n],i=o.reduce((e,t)=>e+t.subtotal,0),l=o.reduce((e,t)=>e+t.quantity,0);return{...e,items:o,total:i,itemCount:l}}case"REMOVE_FROM_CART":{let a=e.items.filter(e=>e.id!==t.payload),s=a.reduce((e,t)=>e+t.subtotal,0),r=a.reduce((e,t)=>e+t.quantity,0);return{...e,items:a,total:s,itemCount:r}}case"UPDATE_QUANTITY":{let{id:a,quantity:s}=t.payload;if(s<=0)return cartReducer(e,{type:"REMOVE_FROM_CART",payload:a});let r=e.items.map(e=>{if(e.id===a){let t=calculateSubtotal(e.menuItem,e.options,s);return{...e,quantity:s,subtotal:t}}return e}),n=r.reduce((e,t)=>e+t.subtotal,0),o=r.reduce((e,t)=>e+t.quantity,0);return{...e,items:r,total:n,itemCount:o}}case"CLEAR_CART":return n;case"TOGGLE_CART":return{...e,isOpen:!e.isOpen};case"LOAD_CART":return t.payload;default:return e}}let o=(0,r.createContext)(void 0);function CartProvider(e){let{children:t}=e,[a,i]=(0,r.useReducer)(cartReducer,n);(0,r.useEffect)(()=>{try{let e=localStorage.getItem("sushi-cart");if(e){let t=JSON.parse(e);i({type:"LOAD_CART",payload:t})}}catch(e){console.error("Error loading cart from localStorage:",e)}},[]),(0,r.useEffect)(()=>{try{localStorage.setItem("sushi-cart",JSON.stringify(a))}catch(e){console.error("Error saving cart to localStorage:",e)}},[a]);let removeFromCart=e=>{i({type:"REMOVE_FROM_CART",payload:e})};return(0,s.jsx)(o.Provider,{value:{cart:a,addToCart:(e,t)=>{i({type:"ADD_TO_CART",payload:{item:e,options:t}})},removeFromCart,updateQuantity:(e,t)=>{t<=0&&removeFromCart(e)},clearCart:()=>{i({type:"CLEAR_CART"})},toggleCart:()=>{i({type:"TOGGLE_CART"})}},children:t})}function useCart(){let e=(0,r.useContext)(o);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},986:function(e,t,a){"use strict";a.d(t,{o:function(){return s}});let s=[{value:20,label:"$20"},{value:50,label:"$50"},{value:100,label:"$100"},{value:200,label:"$200"},{value:500,label:"$500"},{value:1e3,label:"$1,000"}]},3242:function(e,t,a){"use strict";a.d(t,{Gl:function(){return sendWaiterNotification},KU:function(){return sendOrderToTelegram},m1:function(){return generateOrderNumber}});let generateOrderNumber=()=>{let e=Date.now().toString().slice(-6),t=Math.floor(1e3*Math.random()).toString().padStart(3,"0");return"MZ".concat(e).concat(t)},sendOrderToTelegram=async(e,t,a)=>{try{let s=await fetch("/api/telegram",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderNumber:a,checkoutData:e,cart:t})}),r=await s.json();if(r.success)return{success:!0,message:"Pedido enviado exitosamente",orderNumber:r.orderNumber};return{success:!1,message:r.message||"Error al enviar el pedido"}}catch(e){return console.error("Error sending order to Telegram:",e),{success:!1,message:"Error de conexi\xf3n. Por favor intenta nuevamente."}}},sendWaiterNotification=async e=>{try{let t=await fetch("/api/waiter-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:e})}),a=await t.json();if(a.success)return{success:!0,message:"Notificaci\xf3n de mesero enviada"};return{success:!1,message:a.message||"Error al enviar notificaci\xf3n"}}catch(e){return console.error("Error sending waiter notification:",e),{success:!1,message:"Error de conexi\xf3n"}}}},2489:function(){}},function(e){e.O(0,[597,358,744],function(){return e(e.s=6909)}),_N_E=e.O()}]);