"use strict";exports.id=117,exports.ids=[117],exports.modules={54117:(e,t,a)=>{a.d(t,{V:()=>useConnectionTest,w:()=>useMenuData});var n=a(9885);function useMenuData(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(!0),[o,c]=(0,n.useState)(null),[r,u]=(0,n.useState)(null),[l,i]=(0,n.useState)({categories:0,totalItems:0}),d=(0,n.useRef)(null),fetchMenuData=async()=>{try{c(null),console.log("\uD83D\uDD04 Fetching menu data...");let e=await fetch("/api/menu",{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let a=await e.json();if(a.success)t(a.data),u(a.lastUpdated),i(a.stats||{categories:0,totalItems:0}),console.log("✅ Menu data loaded:",{categories:a.stats?.categories,items:a.stats?.totalItems,cached:a.cached,cacheAge:a.cacheAge});else throw Error(a.message||"Failed to fetch menu data")}catch(t){let e=t instanceof Error?t.message:"Unknown error occurred";c(e),console.error("❌ Error fetching menu:",t)}finally{s(!1)}};return(0,n.useEffect)(()=>{console.log("\uD83D\uDCCC useMenuData mounted - fetching initial data"),fetchMenuData()},[]),(0,n.useEffect)(()=>(console.log("⏱️ Setting up polling interval (30s)"),d.current=setInterval(()=>{console.log("\uD83D\uDD14 Polling for menu updates..."),fetchMenuData()},3e4),()=>{d.current&&(clearInterval(d.current),console.log("⏹️ Cleared polling interval"))}),[]),{menuData:e,loading:a,error:o,refetch:fetchMenuData,lastUpdated:r,stats:l}}function useConnectionTest(){let[e,t]=(0,n.useState)(!1),[a,s]=(0,n.useState)(null),testConnection=async()=>{try{t(!0),s(null);let e=await fetch("/api/menu",{method:"POST",headers:{"Content-Type":"application/json"}}),a=await e.json();return s(a),a.success}catch(e){return s({success:!1,message:e instanceof Error?e.message:"Connection test failed"}),!1}finally{t(!1)}};return{testConnection,testing:e,result:a}}}};