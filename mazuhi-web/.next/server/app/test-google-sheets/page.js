(()=>{var e={};e.id=3955,e.ids=[3955],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57310:e=>{"use strict";e.exports=require("url")},73468:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=r(67096),t=r(16132),n=r(37284),o=r.n(n),l=r(32564),i={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>l[e]);r.d(s,i);let d=["",{children:["test-google-sheets",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,48057)),"/var/www/mazuhi-web/src/app/test-google-sheets/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,93897)),"/var/www/mazuhi-web/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"]}],c=["/var/www/mazuhi-web/src/app/test-google-sheets/page.tsx"],x="/test-google-sheets/page",g={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/test-google-sheets/page",pathname:"/test-google-sheets",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},30588:(e,s,r)=>{Promise.resolve().then(r.bind(r,69014))},69014:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>TestGoogleSheetsPage});var a=r(30784),t=r(9885);function TestGoogleSheetsPage(){let[e,s]=(0,t.useState)("No probado"),[r,n]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[i,d]=(0,t.useState)([]),[c,x]=(0,t.useState)(!1),[g,u]=(0,t.useState)(!1),[m,h]=(0,t.useState)(!1),[p,j]=(0,t.useState)(""),[b,v]=(0,t.useState)(""),[f,D]=(0,t.useState)(""),testConnection=async()=>{x(!0),j(""),s("Probando...");try{let e=await fetch("/api/menu",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"test"})}),r=await e.json();r.success?s("✅ Conectado exitosamente"):(s(`❌ Error: ${r.message}`),j(r.message))}catch(r){let e=r instanceof Error?r.message:"Error desconocido";s(`❌ Error de red: ${e}`),j(e)}finally{x(!1)}},loadMenuData=async()=>{x(!0),j("");try{let e=await fetch("/api/menu"),s=await e.json();s.success?n(s.menu):j(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";j(e)}finally{x(!1)}},loadSucursalesData=async()=>{u(!0),v("");try{let e=await fetch("/api/sucursales"),s=await e.json();s.success?l(s.data):v(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";v(e)}finally{u(!1)}},loadPromocionesData=async()=>{h(!0),D("");try{let e=await fetch("/api/promociones"),s=await e.json();s.success?d(s.data):D(s.message)}catch(s){let e=s instanceof Error?s.message:"Error desconocido";D(e)}finally{h(!1)}};return(0,t.useEffect)(()=>{testConnection()},[]),a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"\uD83C\uDF63 Integraci\xf3n Google Sheets"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Men\xfa din\xe1mico conectado a Google Spreadsheets"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[a.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Panel de Control"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[a.jsx("button",{onClick:testConnection,disabled:c,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:c?"Probando...":"Probar Conexi\xf3n"}),a.jsx("button",{onClick:loadMenuData,disabled:c,className:"bg-green-500 hover:bg-green-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:c?"Cargando...":"Cargar Men\xfa"}),a.jsx("button",{onClick:loadSucursalesData,disabled:g,className:"bg-purple-500 hover:bg-purple-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:g?"Cargando...":"Cargar Sucursales"}),a.jsx("button",{onClick:loadPromocionesData,disabled:m,className:"bg-orange-500 hover:bg-orange-600 disabled:bg-gray-400 text-white font-bold py-3 px-6 rounded-lg transition-colors",children:m?"Cargando...":"Cargar Promociones"})]}),(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-4",children:[a.jsx("h3",{className:"font-bold mb-2",children:"Estado de Conexi\xf3n:"}),a.jsx("p",{className:"text-lg",children:e}),p&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:[a.jsx("strong",{children:"Error:"})," ",p]})]})]}),r.length>0&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"Men\xfa Cargado desde Google Sheets"}),r.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-[#E09E7D]",children:[e.nombre," (",e.items.length," items)"]}),e.items.length>0?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.items.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h4",{className:"font-bold text-gray-900",children:e.nombre}),(0,a.jsxs)("span",{className:"text-lg font-bold text-[#E09E7D]",children:["$",e.precio.toLocaleString()]})]}),e.descripcion&&a.jsx("p",{className:"text-gray-600 text-sm mb-2",children:e.descripcion}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.nuevo&&a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"Nuevo"}),e.vegetariano&&a.jsx("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded",children:"\uD83C\uDF31 Vegetariano"}),e.picante&&a.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"\uD83C\uDF36️ Picante"}),e.favorito&&a.jsx("span",{className:"bg-red-100 text-red-800 text-xs px-2 py-1 rounded",children:"❤️ Favorito"})]})]},s))}):a.jsx("p",{className:"text-gray-500 italic",children:"No hay items en esta categor\xeda"})]},e.id))]}),o.length>0&&(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"\uD83C\uDFEA Sucursales Cargadas desde Google Sheets"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-purple-600",children:["Sucursales (",o.length," encontradas)"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsx("h4",{className:"font-bold text-gray-900",children:e.nombre})}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDCCD Direcci\xf3n:"})," ",e.direccion]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83C\uDFD9️ Ciudad:"})," ",e.ciudad,", ",e.estado]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDCDE Tel\xe9fono:"})," ",e.telefono]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDD50 Horario:"})," ",e.horario]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDCEE CP:"})," ",e.codigo_postal]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDDBC️ Imagen:"})," ",e.imagen_url?"✅ Si":"❌ No"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"✅ Activa:"})," ",e.activa?"Si":"No"]})]})]},s))})]})]}),b&&(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 mt-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-red-900",children:"❌ Error al cargar Sucursales"}),(0,a.jsxs)("div",{className:"text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",b]})]}),i.length>0&&(0,a.jsxs)("div",{className:"space-y-6 mt-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"\uD83C\uDF89 Promociones Cargadas desde Google Sheets"}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("h3",{className:"text-2xl font-bold mb-4 text-orange-600",children:["Promociones (",i.length," encontradas)"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[a.jsx("div",{className:"flex justify-between items-start mb-2",children:a.jsx("h4",{className:"font-bold text-gray-900",children:e.nombre})}),(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDCDD Descripci\xf3n:"})," ",e.descripcion]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-2",children:[e.sucursal&&a.jsx("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:"\uD83C\uDFEA Sucursal"}),e.domicilio&&a.jsx("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"\uD83D\uDE9A Domicilio"})]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"\uD83D\uDDBC️ Imagen:"})," ",e.imagen_url?"✅ Si":"❌ No"]}),(0,a.jsxs)("p",{children:[a.jsx("strong",{children:"✅ Activa:"})," ",e.activa?"Si":"No"]}),e.imagen_url&&(0,a.jsxs)("p",{className:"truncate",children:[a.jsx("strong",{children:"\uD83D\uDD17 URL:"})," ",a.jsx("span",{className:"text-xs",children:e.imagen_url})]})]})]},s))})]})]}),f&&(0,a.jsxs)("div",{className:"bg-red-50 rounded-lg p-6 mt-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-red-900",children:"❌ Error al cargar Promociones"}),(0,a.jsxs)("div",{className:"text-red-800",children:[a.jsx("strong",{children:"Error:"})," ",f]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-4",children:"\uD83D\uDCCB Informaci\xf3n T\xe9cnica"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Spreadsheet ID:"}),a.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded ml-2",children:"1zQ8GWmW72NrhspyhF93ZKBnD1TSvnm69O2Gv2EECCUY"})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Hojas esperadas:"})," Entradas, Arroces, Rollos_Naturales, Rollos_Empanizados, Rollos_Especiales, Rollos_Horneados, Bebidas, Postres, Extras, Sucursales, Promociones"]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Columnas de Men\xfa:"})," nombre, descripcion, precio, imagen_url, nuevo, vegetariano, picante, favorito"]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Columnas de Sucursales:"})," nombre, direccion, telefono, horario, ciudad, estado, codigo_postal, imagen_url, activa"]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"Columnas de Promociones:"})," nombre, descripcion, imagen_url, activa, sucursal, domicilio"]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-6 mt-8",children:[a.jsx("h2",{className:"text-xl font-bold mb-4 text-blue-900",children:"\uD83D\uDCDD Instrucciones"}),(0,a.jsxs)("div",{className:"space-y-2 text-blue-800",children:[a.jsx("p",{children:a.jsx("strong",{children:"\uD83D\uDCCB Para el Men\xfa:"})}),a.jsx("p",{children:"1. Cada hoja de men\xfa debe tener: nombre, descripcion, precio, imagen_url, nuevo, vegetariano, picante, favorito"}),a.jsx("p",{children:"2. Los valores booleanos pueden ser 'true', 'si', o estar vac\xedos"}),a.jsx("p",{children:"3. El precio debe ser un n\xfamero v\xe1lido"}),a.jsx("p",{children:a.jsx("strong",{children:"\uD83C\uDFEA Para las Sucursales:"})}),a.jsx("p",{children:'1. La hoja "Sucursales" debe tener: nombre, direccion, telefono, horario, ciudad, estado, codigo_postal, imagen_url, activa'}),a.jsx("p",{children:"2. El campo 'activa' determina si la sucursal se muestra (true/si para mostrar)"}),a.jsx("p",{children:"3. imagen_url es opcional para mostrar foto de la sucursal"}),a.jsx("p",{children:a.jsx("strong",{children:"\uD83C\uDF89 Para las Promociones:"})}),a.jsx("p",{children:'1. La hoja "Promociones" debe tener: nombre, descripcion, imagen_url, activa, sucursal, domicilio'}),a.jsx("p",{children:"2. 'activa': si la promoci\xf3n est\xe1 disponible (true/si para mostrar)"}),a.jsx("p",{children:"3. 'sucursal': si la promoci\xf3n es v\xe1lida en sucursal (true/si)"}),a.jsx("p",{children:"4. 'domicilio': si la promoci\xf3n es v\xe1lida a domicilio (true/si)"}),a.jsx("p",{children:"5. imagen_url se usa como fondo degradado de la promoci\xf3n"}),a.jsx("p",{children:a.jsx("strong",{children:"⚡ General:"})}),a.jsx("p",{children:"6. Los cambios en el spreadsheet se reflejan inmediatamente al recargar"})]})]})]})})}},48057:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>o,__esModule:()=>n,default:()=>i});var a=r(95153);let t=(0,a.createProxy)(String.raw`/var/www/mazuhi-web/src/app/test-google-sheets/page.tsx`),{__esModule:n,$$typeof:o}=t,l=t.default,i=l}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[7553,8336],()=>__webpack_exec__(73468));module.exports=r})();